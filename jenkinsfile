pipeline {
    agent none

    stages {
        stage('Build in Dev') {
            agent { label 'dev' }
            steps {
                echo "Running build on DEV agent"
                sh 'echo Building source code'
            }
        }

        stage('Test in QA') {
            agent { label 'qa' }
            steps {
                echo "Running tests on QA agent"
                sh 'echo Running automated tests'
            }
        }

        stage('Deploy to Prod') {
            agent { label 'prod' }
            steps {
                echo "Deploying to PROD environment"
                sh 'echo Deploying to production server'
            }
        }
    }
}
